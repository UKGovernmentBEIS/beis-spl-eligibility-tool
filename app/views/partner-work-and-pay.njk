{% from "hidden-fields/macro.njk" import appendHiddenFields %}
{% from "back-link/macro.njk" import govukBackLink %}
{% from "radios/macro.njk" import govukRadios %}
{% from "button/macro.njk" import govukButton %}

{% extends "layout.njk" %}

{% block pageTitle %}
  Check if you can get shared parental leave and pay
{% endblock %}

{% block content %}

  {% set otherParent = data | otherParentName(currentParent) %}

  {% set headingCaption %}
    {{ data | currentParentName(currentParent) | capitalize }}’s eligibility
  {% endset %}

  {% set heading %}
    {{ otherParent | capitalize }}’s work and pay
  {% endset %}

  {% set partnerWorkTitle %}
    {% if data | isAdoption %}
      Did the {{ otherParent }} work (or will they have worked) for at least 26 weeks during the 66 weeks ending with your placement date?
    {% else %}
      {% set didOrWill %}
        {% if data | relevantWeek | isInPast %}
          Did the {{ otherParent }} work
        {% else %}
          Will the {{ otherParent }} have worked
        {% endif %}
      {% endset %}
      {{ didOrWill }} for at least 26 weeks between {{ data | sixtySixWeeksBeforeRelevantWeek | formatForDisplay }} and {{ data | relevantWeek | formatForDisplay }}?
    {% endif %}
  {% endset %}

  {% set partnerPayTitle %}
    {% if data | isAdoption%}
      Did the {{ otherParent }} earn (or will they have earned) a
      total of £390 or more in any 13 weeks during the 66 weeks ending with your placement date?
    {% else %}
      {% set didOrWill %}
        {% if data | relevantWeek | isInPast %}
          Did the {{ otherParent }} earn
        {% else %}
          Will the {{ otherParent }} have earned
        {% endif %}
      {% endset %}
      {{ didOrWill }} a total of £390 or more over 13 weeks between {{ data| sixtySixWeeksBeforeRelevantWeek | formatForDisplay }} and {{ data | relevantWeek | formatForDisplay }}?
    {% endif %}
  {% endset %}

  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
      <h1 class="govuk-heading-xl">
        <span class="govuk-caption-xl">{{ headingCaption }}</span>
        {{ heading }}
      </h1>
      {% set formaction = "/partner-work-and-pay/" + currentParent %}
      <form action="{{formaction}}" method="POST">
        {% call appendHiddenFields(data) %}
          {{ govukRadios({
            classes: "govuk-radios",
            idPrefix: currentParent + "-partner-work",
            name: currentParent + "-partner-work",
            fieldset: {
              legend: {
                text: partnerWorkTitle,
                isPageHeading: true,
                classes: "govuk-fieldset__legend--m"
              }
            },
            hint: {
              text: "The 26 weeks don't need to be consecutive. They can be full or partial weeks."
            },
            items: [
              {
                value: "yes",
                text: "Yes"
              },
              {
                value: "no",
                text: "No"
              }
            ]
          }) }}

          {{ govukRadios({
            classes: "govuk-radios",
            idPrefix: currentParent + "-partner-pay",
            name: currentParent + "-partner-pay",
            fieldset: {
              legend: {
                text: partnerPayTitle,
                isPageHeading: true,
                classes: "govuk-fieldset__legend--m"
              }
            },
            hint: {
              text: "The 13 weeks don't need to be consecutive."
            },
            items: [
              {
                value: "yes",
                text: "Yes"
              },
              {
                value: "no",
                text: "No"
              }
            ]
          }) }}

          {{ govukButton({
            text: "Continue"
          }) }}

        {% endcall %}
      </form>
    </div>
  </div>

{% endblock %}
